<link rel="import" href="../../bower_components/polymer/polymer.html">
<link rel="import" href="../../bower_components/paper-toggle-button/paper-toggle-button.html">
<link rel="import" href="../../bower_components/paper-slider/paper-slider.html">
<link rel="import" href="../../bower_components/paper-input/paper-input.html">
<link rel="import" href="../../bower_components/paper-tabs/paper-tabs.html">
<link rel="import" href="../../bower_components/paper-item/paper-item.html">

<polymer-element name="profile-options" attributes="selectedProfile settingsType">
    <template>
        <link rel="stylesheet" href="profile-options.css" />
        <div vertical layout fit>
            <paper-tabs selected="{{selectedTab == 'customSetting' ? 0 : 1}}" id="settingsTabs">
                <paper-tab class="supp" id="customSetting">Custom</paper-tab>
                <paper-tab class="supp" id="profileSetting">Profile</paper-tab>
            </paper-tabs>
            <div flex id="settings">
                <div id="customSettings" style="display: {{selectedTab == 'customSetting' ? 'block' : 'none'}}">
                    <div center horizontal layout class="option">
                        <div flex>Include Symbols</div>
                        <paper-toggle-button checked="{{includeSymbols}}"></paper-toggle-button>
                    </div>
                    <div center horizontal layout class="option">
                        <div flex>Case Sensitive</div>
                        <paper-toggle-button checked="{{caseSensitive}}"></paper-toggle-button>
                    </div>
                    <div center horizontal layout class="option">
                        <div flex>Password Length: {{passwordLength}}</div>
                    </div>
                    <div center horizontal layout class="option  green-slider">
                        <paper-slider pin min="6" max="15" step="1" value="{{passwordLength}}"></paper-slider>
                    </div>
                    <div center horizontal layout class="option">
                        <div flex>Use PIN Number</div>
                        <paper-toggle-button checked="{{usePin}}"></paper-toggle-button>
                    </div>
                    <pin-option usepin="{{usePin}}" pinnumber="{{pinNumber}}"></pin-option>
                </div>
                <div id="profileSettings" style="display: {{selectedTab == 'profileSetting' ? 'block' : 'none'}}">
                    <core-menu on-core-select="{{profileSelectAction}}">
                        <paper-item>Standard</paper-item>
                        <paper-item>Social Networking</paper-item>
                        <paper-item>High Security</paper-item>
                    </core-menu>
                </div>
            </div>
            <paper-item class="supp" icon="file-download">Import Settings</paper-item>
            <paper-item class="supp" icon="info-outline">About</paper-item>
        </div>
    </template>
    <script>
        Polymer('profile-options', {
            settingsType: 'customSetting',
            includeSymbols: true,
            caseSensitive: true,
            passwordLength: 15,
            usePin: false,
            pinNumber: '0000',
            ready: function () {
                var self = this;
                this.super();
                this.setCustomSettings();
                this.$.settingsTabs.addEventListener('core-activate', function (e) {
                    if (e.detail.item.id == 'customSetting') {
                        self.selectedTab = 'customSetting';
                        self.setCustomSettings();
                    }
                    else {
                        self.selectedTab = 'profileSetting';
                    }
                });
            },
            setCustomSettings: function () {
                this.settingsType = 'customSetting';
                this.selectedProfile = {
                    name: '',
                    includeSymbols: this.includeSymbols,
                    caseSensitive: this.caseSensitive,
                    passwordLength: this.passwordLength,
                    usePin: this.usePin,
                    pinNumber: this.pinNumber
                };
            },
            includeSymbolsChanged: function () {
                this.setCustomSettings();
            },
            caseSensitiveChanged: function () {
                this.setCustomSettings();
            },
            passwordLengthChanged: function () {
                this.setCustomSettings();
            },
            usePinChanged: function () {
                this.setCustomSettings();
            },
            pinNumberChanged: function () {
                this.setCustomSettings();
            },
            profileSelectAction: function (e) {
                console.log(e);
                this.settingsType = 'profileSetting';
                //this.selectedProfile = TODO: populate profile settings.
                if (e.detail.isSelected) {
                    this.fire('profileSelected');
                }
            }
        });
    </script>
</polymer-element>